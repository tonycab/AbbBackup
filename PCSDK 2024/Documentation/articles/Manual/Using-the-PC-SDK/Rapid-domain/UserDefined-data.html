<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>UserDefined data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="UserDefined data ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc">
    <meta property="docfx:tocrel" content="../../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../images/ABBLogo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../../articles/Introduction/GettingStarted.html" title="Introduction">Introduction</a>
                      </li>
                      <li>
                          <a href="../../../../articles/Manual/Manual-Topic.html" title="Manual">Manual</a>
                      </li>
                      <li>
                          <a href="../../../../articles/Samples/Samples-Topic.html" title="Samples">Samples</a>
                      </li>
                      <li>
                          <a href="../../../../api/index.html" title="API Reference">API Reference</a>
                      </li>
                      <li>
                          <a href="../../../../articles/releases/pc-sdk-2024-4.html" title="Releases">Releases</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Introduction/Introduction-Topic.html" title="Introduction" class="">Introduction</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Introduction/About-creating-controller-applications.html" title="About creating controller applications" class="">About creating controller applications</a>
                          </li>
                          <li class="">
                            <a href="../../Introduction/Documentation-and-help.html" title="Documentation and help" class="">Documentation and help</a>
                          </li>
                          <li class="">
                            <a href="../../Introduction/Terminology.html" title="Terminology" class="">Terminology</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Installation-and-development-environment/Installation-and-development-environment-Topic.html" title="Installation and development environment" class="">Installation and development environment</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Installation-and-development-environment/Installation-overview.html" title="Installation overview" class="">Installation overview</a>
                          </li>
                          <li class="">
                            <a href="../../Installation-and-development-environment/How-to-set-up-your-PC-to-communicate-with-robot.html" title="How to set up your PC to communicate with robot" class="">How to set up your PC to communicate with robot</a>
                          </li>
                          <li class="">
                            <a href="../../Installation-and-development-environment/Development-overview.html" title="Development environment" class="">Development environment</a>
                          </li>
                          <li class="">
                            <a href="../../Installation-and-development-environment/Two-development-models---virtual-and-real.html" title="Two development models - virtual and real" class="">Two development models - virtual and real</a>
                          </li>
                          <li class="">
                            <a href="../../Installation-and-development-environment/Installation-Directory.html" title="Installation Directory" class="">Installation Directory</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Run-time-environment/Run-time-environment-Topic.html" title="Run-time environment" class="">Run-time environment</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Run-time-environment/Overview.html" title="Overview" class="">Overview</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../Run-time-environment/Running-PC-SDK-Applications/Running-PC-SDK-Applications-Topic.html" title="Running PC SDK Applications" class="">Running PC SDK Applications</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../Run-time-environment/Running-PC-SDK-Applications/Running-PC-SDK-Applications-Overview.html" title="Overview" class="">Overview</a>
                                </li>
                                <li class="">
                                  <a href="../../Run-time-environment/Running-PC-SDK-Applications/Mastership.html" title="Mastership" class="">Mastership</a>
                                </li>
                                <li class="">
                                  <a href="../../Run-time-environment/Running-PC-SDK-Applications/PC-application-configuration.html" title="PC application configuration" class="">PC application configuration</a>
                                </li>
                                <li class="">
                                  <a href="../../Run-time-environment/Running-PC-SDK-Applications/Communication-between-PC-and-Controller.html" title="Communication between PC and Controller" class="">Communication between PC and Controller</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <a href="../../Run-time-environment/Release-upgrades-and-compatibility.html" title="Release upgrades and compatibility" class="">Release upgrades and compatibility</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Developing-Controller-applications/Developing-Controller-applications-Topic.html" title="Developing Controller applications" class="">Developing Controller applications</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Developing-Controller-applications/Developing-Controller-applications-introduction.html" title="Introduction" class="">Introduction</a>
                          </li>
                          <li class="">
                            <a href="../../Developing-Controller-applications/Analysis-and-design.html" title="Analysis and design" class="">Analysis and design</a>
                          </li>
                          <li class="">
                            <a href="../../Developing-Controller-applications/Controller-events-and-threads.html" title="Controller events and threads" class="">Controller events and threads</a>
                          </li>
                          <li class="">
                            <a href="../../Developing-Controller-applications/User-Authorization-system.html" title="User Authorization system" class="">User Authorization system</a>
                          </li>
                          <li class="">
                            <a href="../../Developing-Controller-applications/Exception-handling.html" title="Exception handling" class="">Exception handling</a>
                          </li>
                          <li class="">
                            <a href="../../Developing-Controller-applications/How-to-use-the-online-help.html" title="How to use the online help" class="">How to use the online help</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Using-the-PC-SDK/Using-the-PC-SDK-Topic.html" title="Using the PC SDK" class="">Using the PC SDK</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Controller-API.html" title="Controller API" class="">Controller API</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Create-a-simple-PC-SDK-application.html" title="Create a simple PC SDK application" class="">Create a simple PC SDK application</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Discovery-domain.html" title="Discovery domain" class="">Discovery domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Accessing-the-controller.html" title="Accessing the controller" class="">Accessing the controller</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../Using-the-PC-SDK/Using-the-PC-SDK-Topic.html" title="Rapid domain" class="">Rapid domain</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/Working-with-RAPID-data.html" title="Working with RAPID data" class="">Working with RAPID data</a>
                                </li>
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/Handling-arrays.html" title="Handling arrays" class="">Handling arrays</a>
                                </li>
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/ReadItem-and-WriteItem-methods.html" title="ReadItem and WriteItem methods" class="">ReadItem and WriteItem methods</a>
                                </li>
                                <li class="active">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/UserDefined-data.html" title="UserDefined data" class="active">UserDefined data</a>
                                </li>
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/RAPID-symbol-search.html" title="RAPID symbol search" class="">RAPID symbol search</a>
                                </li>
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/Working-with-RAPID-modules-and-programs.html" title="Working with RAPID modules and programs" class="">Working with RAPID modules and programs</a>
                                </li>
                                <li class="">
                                  <a href="../../Using-the-PC-SDK/Rapid-domain/Enable-operator-response-to-RAPID-UI-instructions-from-a-PC.html" title="Enable operator response to RAPID UI-instructions from a PC" class="">Enable operator response to RAPID UI-instructions from a PC</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/IO-system-domain.html" title="I/O system domain" class="">I/O system domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Configuration-domain.html" title="Configuration domain" class="">Configuration domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Event-log-domain.html" title="Event log domain" class="">Event log domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Motion-domain.html" title="Motion domain" class="">Motion domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/File-system-domain.html" title="File system domain" class="">File system domain</a>
                          </li>
                          <li class="">
                            <a href="../../Using-the-PC-SDK/Messaging-domain.html" title="Messaging domain" class="">Messaging domain</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Debugging-and-troubleshooting/Debugging-and-troubleshooting-Topic.html" title="Debugging and troubleshooting" class="">Debugging and troubleshooting</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Debugging-and-troubleshooting/Debugging.html" title="Debugging" class="">Debugging</a>
                          </li>
                          <li class="">
                            <a href="../../Debugging-and-troubleshooting/Troubleshooting.html" title="Troubleshooting" class="">Troubleshooting</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../Deployment-of-a-PC-SDK-application/Deployment-of-a-PC-SDK-application-Topic.html" title="Deployment of a PC SDK application" class="">Deployment of a PC SDK application</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../../Deployment-of-a-PC-SDK-application/Deployment-of-a-PC-SDK-application-overview.html" title="Deployment" class="">Deployment</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="UserDefined-data">
<h1 id="userdefined-data">UserDefined data</h1>

<h2 id="overview">Overview</h2>
<p>RECORD structures are common in RAPID code.
To handle these unique data types, a <code>UserDefined</code> class is available. This class has properties and methods to handle individual
components of a RECORD.</p>
<p>In some cases implementing your own structure can improve application design and code maintenance.</p>
<h2 id="creating-userdefined-object">Creating UserDefined object</h2>
<p>The <code>UserDefined</code> constructor takes a <code>RapidDataType</code> object as argument. To retrieve a <code>RapidDataType</code> object you need to provide
a <code>RapidSymbol</code> or the path to the declaration of the RAPID data type.</p>
<p>The following example creates a <code>UserDefined</code> object representing the RAPID RECORD <em>processdata</em>:</p>
<pre><code class="lang-csharp">RapidDataType rdt;
rdt = this.aController.Rapid.GetRapidDataType(&quot;T_ROB1&quot;, &quot;user&quot;,  &quot;processdata&quot;);
UserDefined processdata = new UserDefined(rdt);
</code></pre>
<h2 id="reading-userdefined-data">Reading UserDefined data</h2>
<p><code>UserDefined</code> can be used to read any kind of RECORD variable from the controller. The individual components of the RECORD are
accessible using the <code>Components</code> property and an index. Each <code>Component</code> can be read as a string.</p>
<pre><code class="lang-csharp">UserDefined processdata = new UserDefined(rdt);
processdata = (UserDefined)rd.Value;
string no1 = processdata.Components[0].ToString();
string no2 = processdata.Components[1].ToString();
</code></pre>
<p>Each individual string can then be used in a <code>FillFromString</code> method to convert the component into a specific data type,
for example <code>RobTarget</code> or <code>ToolData</code>. For more information,
see <a class="xref" href="Working-with-RAPID-data.html#irapiddatafillfromstring-method">IRapidData.FillFromString method</a>.</p>
<h2 id="writing-to-userdefined-data">Writing to UserDefined data</h2>
<p>If you want to modify <code>UserDefined</code> data and write it to the controller, you must first read the <code>UserDefined</code> object and the
apply new values using the <code>FillFromString</code> method. Then you need to perform a write operation using the <code>RapidData.Value</code> property.</p>
<pre><code class="lang-csharp">processdata.Components[0].FillFromString(&quot;[0,0,0]&quot;);
processdata.Components[1].FillFromString(&quot;10&quot;);
rd.Value = processdata;
</code></pre>
<p>For more information and code samples,
see <a class="xref" href="Working-with-RAPID-data.html#irapiddatafillfromstring-method">IRapidData.FillFromString method</a>
and <a class="xref" href="Working-with-RAPID-data.html">Writing to RAPID data</a>.</p>
<h2 id="recursively-reading-the-structure-of-any-record-data-type">Recursively reading the structure of any RECORD data type</h2>
<p>If you need to know the structure of a RECORD data type (built-in or user-defined) you must first retrieve the <em>record components</em>
of the record. Then you need to iterate the record components and check if any of them are also records. This procedure must be
repeated until all record components are atomic types.The following code example shows how to get information about the <code>robtarget</code>
data type. The <code>robtarget</code> URL is “RAPID/robtarget” or just “robtarget”.</p>
<pre><code class="lang-csharp">private void SearchRobtarget()
{
    RapidSymbolSearchProperties sProp = RapidSymbolSearchProperties.CreateDefault();
    sProp.Recursive = true;
    sProp.Types = SymbolTypes.Constant | SymbolTypes.Persistent;
    sProp.SearchMethod = SymbolSearchMethod.Block;
    RapidSymbol[] rsCol = tRob1.SearchRapidSymbol(sProp, &quot;RAPID/robtarget&quot;, &quot;p10&quot;);
    RapidDataType theDataType;
    if (rsCol.Length &gt; 0)
    {
        Console.WriteLine(&quot;RapidSymbol name = &quot; + rsCol[0].Name);
        theDataType = RapidDataType.GetDataType(rsCol[0]);
        Console.WriteLine(&quot;DataType = &quot; + theDataType.Name);
        if (theDataType.IsRecord)
        {
            RapidSymbol[] syms =
            theDataType.GetComponents(); SearchSymbolStructure(syms);
        }
    }
}

private void SearchSymbolStructure(RapidSymbol[] rsCol)
{
    RapidDataType theDataType;foreach (RapidSymbol rs in rsCol)
    {
        Console.WriteLine(&quot;RapidSymbol name = &quot; + rs.Name);
        theDataType = RapidDataType.GetDataType(rs);
        Console.WriteLine(&quot;DataType = &quot; + theDataType.Name);
        if (theDataType.IsRecord) 
        {
            RapidSymbol[] syms = theDataType.GetComponents();
            SearchSymbolStructure(syms);
        }
    }
}
</code></pre>
<p>The code example above produces the following printout:</p>
<pre><code class="lang-plaintext">RapidSymbol name = p10

DataType = robtarget

RapidSymbol name = trans

DataType = pos

RapidSymbol name = x

DataType = num

RapidSymbol name = y

DataType = num

RapidSymbol name = z

DataType = num

RapidSymbol name = rot

DataType = orient

RapidSymbol name = q1

DataType = num

RapidSymbol name = q2

DataType = num

RapidSymbol name = q3

DataType = num

RapidSymbol name = q4

DataType = num

RapidSymbol name = robconf

DataType = confdata

RapidSymbol name = cf1

DataType = num

RapidSymbol name = cf4

DataType = num

RapidSymbol name = cf6

DataType = num

RapidSymbol name = cfx

DataType = num

RapidSymbol name = extax

DataType = extjoint

RapidSymbol name = eax_a

DataType = num

RapidSymbol name = eax_b

DataType = num

RapidSymbol name = eax_c

DataType = num

RapidSymbol name = eax_d

DataType = num

RapidSymbol name = eax_e

DataType = num

RapidSymbol name = eax_f

DataType = num
</code></pre>
<h2 id="implement-your-own-struct-representing-a-record">Implement your own struct representing a RECORD</h2>
<p>The following example shows how you can create your own .NET data type representing a RECORD in the controller instead of
using the <code>UserDefined</code> type.</p>
<pre><code class="lang-csharp">RapidDataType rdt = ctr.Rapid.GetRapidDataType(&quot;T_ROB1&quot;, &quot;MyModule&quot;, &quot;processdata&quot;);
ProcessData pc = new ProcessData(rdt);
pc.FillFromString(rd.Value.ToString());
</code></pre>
<h2 id="implementing-processdata-struct">Implementing ProcessData struct</h2>
<p>The following example shows how the new data type <code>ProcessData</code> may be implemented. This is done by using a .NET struct and letting
<code>ProcessData</code> wrap the <code>UserDefined</code> object.</p>
<p>The struct implementation should include a <code>FillFromString</code> and <code>ToString</code> method, that is, inherit the <code>IRapidData</code> interface.
Any properties and methods may also be implemented.</p>
<pre><code class="lang-csharp">public struct ProcessData : IRapidData
{
    private UserDefined data;
    
    public ProcessData(RapidDataType rdt)
    {
        data = new UserDefined(rdt);
    }
    
    private UserDefined IntData
    {
        get { return data; }
        set { data = value; }
    }
    
    public int StepOne
    {
        get
        {
            int res = Convert.ToInt32(IntData.Components[0].ToString());
            return res;
        }
        set
        {
            IntData.Components[0] = new Num(value);
        }
    }
}
</code></pre>
<h2 id="implementing-irapiddata-methods">Implementing IRapidData methods</h2>
<p>This piece of code shows how the two <code>IRapidData</code> methods <code>ToString</code> and <code>FillFromString</code> can be implemented.</p>
<pre><code class="lang-csharp">public void FillFromString(string newValue)
{
    IntData.FillFromString(newValue);
}

public override string ToString()
{
    return IntData.ToString();
}
</code></pre>
<p>The <code>ToString</code> method has to use the <code>Overrides</code> keyword in Visual Basic and the <code>override</code> keyword in C#.</p>
<h2 id="property-implementation">Property implementation</h2>
<p>Each item in the RECORD structure should have a corresponding property in the extended .NET data type. The get and set methods have
to implement the conversion from/to controller data type to .NET data type.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If <code>FillFromNum()</code> does not work, use <code>FillFromString</code> for records <code>ud.FillFromString(&quot;[\&quot;10\&quot;,50,60,\&quot;apa\&quot;]&quot;);</code> does not work.</p>
</div>
<pre><code class="lang-csharp">public int Step
{
    get
    {
        int res = Convert.ToInt32(IntData.Components[0].ToString());
        return res;
    }
    set
    {
        Num tmp = new Num();
        tmp.FillFromNum(value);
        IntData.Components[0] = tmp;
    }
}
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © 2024 ABB</span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
